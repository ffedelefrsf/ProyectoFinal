<div class="container-scroller">
    <app-navbar></app-navbar>
    <div class="container-fluid page-body-wrapper">
        <app-side-menu></app-side-menu>
        <div class="main-panel">
            <div class="content-wrapper">
                <div id="modificacion-adherentes">
                    <div class="card" *ngIf="!loading">
                        <div class="card-body">
                            <h4 class="card-title">Actualización de datos</h4>
                            <form class="form-sample" [formGroup]="editAdherenteForm" (ngSubmit)="editAdherente()">
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group row">
                                            <label class="col-sm-3 col-form-label">Nombre</label>
                                            <div class="col-sm-9">
                                                <input type="text" class="form-control" placeholder="Nombre"
                                                    formControlName="nombre" value="{{adherente.nombre}}"
                                                    [style.border]="editAdherenteForm.controls['nombre'].errors ? '1px solid red' : null"
                                                    maxlength="100" />
                                                <i class="fa fa-exclamation-circle"
                                                    title="El nombre ingresado es incorrecto"
                                                    *ngIf="editAdherenteForm.controls['nombre'].errors"></i>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group row">
                                            <label class="col-sm-3 col-form-label">Apellido</label>
                                            <div class="col-sm-9">
                                                <input type="text" class="form-control" placeholder="Apellido"
                                                    formControlName="apellido" value="{{adherente.apellido}}"
                                                    [style.border]="editAdherenteForm.controls['apellido'].errors ? '1px solid red' : null"
                                                    maxlength="100" />
                                                <i class="fa fa-exclamation-circle"
                                                    title="El apellido ingresado es incorrecto"
                                                    *ngIf="editAdherenteForm.controls['apellido'].errors"></i>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group row">
                                            <label class="col-sm-3 col-form-label">Número de documento</label>
                                            <div class="col-sm-9">
                                                <input type="text" class="form-control"
                                                    placeholder="Número de documento" formControlName="dni"
                                                    value="{{adherente.dni}}"
                                                    [style.border]="editAdherenteForm.controls['dni'].errors ? '1px solid red' : null"
                                                    maxlength="8" />
                                                <i class="fa fa-exclamation-circle"
                                                    title="El número de documento ingresado es incorrecto"
                                                    *ngIf="editAdherenteForm.controls['dni'].errors"></i>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group row">
                                            <label class="col-sm-3 col-form-label">Email</label>
                                            <div class="col-sm-9">
                                                <input type="text" class="form-control" placeholder="Email"
                                                    formControlName="email" value="{{adherente.email}}"
                                                    [style.border]="editAdherenteForm.controls['email'].errors ? '1px solid red' : null"
                                                    maxlength="100" />
                                                <i class="fa fa-exclamation-circle"
                                                    title="El email ingresado es incorrecto"
                                                    *ngIf="editAdherenteForm.controls['email'].errors"></i>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group row">
                                            <label class="col-sm-3 col-form-label">Sexo</label>
                                            <div class="col-sm-9">
                                                <select class="form-control" formControlName="sexo">
                                                    <option [selected]="adherente.sexo=='Masculino'">Masculino</option>
                                                    <option [selected]="adherente.sexo=='Femenino'">Femenino</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group row">
                                            <label class="col-sm-3 col-form-label">Fecha de nacimiento</label>
                                            <div class="col-sm-9">
                                                <input class="form-control" type="text" placeholder="dd/mm/yyyy"
                                                    formControlName="fechaNacimiento" value="{{adherente.fechaNacimiento}}"
                                                    [style.border]="editAdherenteForm.controls['fechaNacimiento'].errors ? '1px solid red' : null"
                                                    ngbDatepicker #fechaNacimientoDatePicker="ngbDatepicker"
                                                    [minDate]="{year: 1900, month: 1, day: 1}"
                                                    [maxDate]="{year: currentYear, month: currentMonth, day: currentDay}"
                                                    (click)="fechaNacimientoDatePicker.toggle()" readonly />
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group row">
                                            <label class="col-sm-3 col-form-label">Domicilio</label>
                                            <div class="col-sm-9">
                                                <input type="text" class="form-control" placeholder="Domicilio"
                                                    formControlName="direccion" value="{{adherente.direccion}}"
                                                    [style.border]="editAdherenteForm.controls['direccion'].errors ? '1px solid red' : null"
                                                    maxlength="100" />
                                                <i class="fa fa-exclamation-circle"
                                                    title="La dirección ingresada es incorrecta"
                                                    *ngIf="editAdherenteForm.controls['direccion'].errors"></i>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group row">
                                            <label class="col-sm-3 col-form-label">Teléfono</label>
                                            <div class="col-sm-9">
                                                <input type="text" class="form-control" placeholder="Teléfono"
                                                    formControlName="telefono" value="{{adherente.telefono}}"
                                                    [style.border]="editAdherenteForm.controls['telefono'].errors ? '1px solid red' : null"
                                                    maxlength="10" />
                                                <i class="fa fa-exclamation-circle"
                                                    title="El número de teléfono ingresado es incorrecto"
                                                    *ngIf="editAdherenteForm.controls['telefono'].errors"></i>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group row">
                                            <label class="col-sm-3 col-form-label">Zona</label>
                                            <div class="col-sm-9">
                                                <select class="form-control" formControlName="zona"
                                                    (change)="updateZonas($event)">
                                                    <option *ngFor="let zona of zonas" [value]="zona.nombre">{{zona.nombre}}
                                                    </option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group row">
                                            <label class="col-sm-3 col-form-label">Localidad</label>
                                            <div class="col-sm-9">
                                                <select class="form-control" formControlName="localidad"
                                                    (change)="updateLocalidades($event)">
                                                    <option *ngFor="let localidad of localidades"
                                                        [value]="localidad.nombre"
                                                        [selected]="localidad.id==adherente.localidad.id">
                                                        {{localidad.nombre}}</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group row">
                                            <label class="col-sm-3 col-form-label">Obra social</label>
                                            <div class="col-sm-9">
                                                <select class="form-control" formControlName="obraSocial"
                                                    (change)="updateObraSocial($event)">
                                                    <option *ngFor="let obraSocial of obrasSociales"
                                                        [value]="obraSocial.descripcion"
                                                        [selected]="adherente.obraSocial.id==obraSocial.id">
                                                        {{obraSocial.descripcion}}</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group row">
                                            <label class="col-sm-3 col-form-label">Fecha de cobertura</label>
                                            <div class="col-sm-9">
                                                <input class="form-control" placeholder="Fecha de cobertura"
                                                    formControlName="fechaCobertura"
                                                    [style.border]="editAdherenteForm.controls['fechaCobertura'].errors ? '1px solid red' : null"
                                                    ngbDatepicker #fechaCoberturaDatePicker="ngbDatepicker"
                                                    [minDate]="{year: 1900, month: 1, day: 1}"
                                                    [maxDate]="{year: 2300, month: 1, day: 1}"
                                                    (click)="fechaCoberturaDatePicker.toggle()" readonly />
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group row">
                                            <label class="col-sm-3 col-form-label">Socio</label>
                                            <div class="col-sm-9">
                                                <select class="form-control" formControlName="socio"
                                                    (change)="updateSocio($event)">
                                                    <option *ngFor="let socio of socios"
                                                        [value]="socio.apellido + ', ' + socio.nombre"
                                                        [selected]="socio.id==adherente.socio.id">{{socio.apellido}}, {{socio.nombre}}
                                                    </option>
                                                </select>
                                                <i class="fa fa-exclamation-circle"
                                                    title="Debe seleccionar un socio"
                                                    *ngIf="editAdherenteForm.controls['socio'].errors && editAdherenteForm.controls['socio'].touched"></i>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group row">
                                            <label class="col-sm-3 col-form-label">Patología preexistente</label>
                                            <div class="col-sm-9">
                                                <select class="form-control" formControlName="enfermedad"
                                                    (change)="updateEnfermedad($event)">
                                                    <option *ngFor="let enfermedad of enfermedades"
                                                        [value]="enfermedad.descripcion"
                                                        [selected]="enfermedad.id==adherente.enfermedad.id">{{enfermedad.descripcion}}
                                                    </option>
                                                </select>
                                                <i class="fa fa-exclamation-circle"
                                                    title="Debe seleccionar una enfermedad"
                                                    *ngIf="editAdherenteForm.controls['enfermedad'].errors && editAdherenteForm.controls['enfermedad'].touched"></i>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group buttons-section">
                                    <button type="button" id="cancel" class="btn btn-light"
                                        (click)="onCancel()">Cancel</button>
                                    <button type="submit" id="modificar" class="btn btn-dark mr-2"
                                        [disabled]="!editAdherenteForm.valid || editAdherenteForm.pending">Modificar</button>
                                </div>
                            </form>
                            <br>
                            <div class="alert alert-fill-success" role="alert" *ngIf="success && !loading">
                                <i class="mdi mdi-alert-circle"></i>
                                El adherente ha sido modificado con éxito.
                            </div>
                            <div class="alert alert-danger" role="alert" *ngIf="error && !loading">
                                Ha ocurrido un error.
                            </div>
                        </div>
                    </div>
                </div>
                <div class="spinner-border text-primary" role="status" *ngIf="loading">
                    <span class="sr-only">Loading...</span>
                </div>
            </div>
            <app-footer></app-footer>
        </div>
    </div>
</div>