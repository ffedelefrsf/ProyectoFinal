<div class="container-scroller">
  <app-navbar></app-navbar>
  <div class="container-fluid page-body-wrapper">
    <app-side-menu></app-side-menu>
    <div class="main-panel">
      <div class="content-wrapper">

        <div class="row">
          <div class="col-12 grid-margin stretch-card">
            <div class="card">
              <div class="card-body">
                <h4 class="card-title">Comprobantes</h4>
                <ngb-accordion [closeOthers]="true" activeIds="static-7" class="accordion accordion-danger">
                  <ngb-panel id="static-7">
                    <ng-template ngbPanelTitle>
                      <h6 class="mb-0">
                        Generación masiva de comprobantes
                      </h6>
                    </ng-template>
                    <ng-template ngbPanelContent>
                      <button *ngIf="!generados && !loadingGeneracion && !error" type="button" class="btn btn-outline-primary"
                        (click)="generarComprobantes()">Generar comprobantes</button>
                      <div class="alert alert-warning" role="alert" *ngIf="loadingGeneracion && !generados">
                        Generando comprobantes...
                      </div>
                      <div class="alert alert-danger" role="alert" *ngIf="error">
                        Error al generar los comprobantes.  
                      </div>
                      <div class="alert alert-info" role="alert" *ngIf="generados && !loadingGeneracion">
                        Los comprobantes han sido generados con exito!
                      </div>
                    </ng-template>
                  </ngb-panel>
                  <ngb-panel id="static-8">
                    <ng-template ngbPanelTitle>
                      <h6 class="mb-0">
                        Impresión de comprobantes
                      </h6>
                    </ng-template>
                    <ng-template ngbPanelContent>
                      <div class="alert alert-warning" role="alert" *ngIf="!(generados && !impresos) && !descargando">
                        Los comprobantes no han sido generados
                      </div>
                      <button type="button" class="btn btn-success" (click)="imprimirComprobantes()" *ngIf="generados && !impresos"><i
                          class="mdi mdi-cloud-download"></i>Descargar PDF</button>
                      <div class="alert alert-success" role="alert" *ngIf="descargando">
                        La descarga comenzará en breve...
                      </div>
                    </ng-template>
                  </ngb-panel>
                </ngb-accordion>
              </div>
            </div>
          </div>
        </div>

      </div>
      <app-footer></app-footer>
    </div>
  </div>
</div>